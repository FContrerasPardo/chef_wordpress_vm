# la manera más adecuada de soportar diversas plataformas con diferentes nombres de paquetes desde Chef es mediante la utilización de la función de ayuda value_for_platform que, a partir de una estructura de datos, nos devuelve un valor correspondiente a la plataforma sobre la que ejecuta la receta. 

#Así, en función de este valor, podremos determinar los paquetes que deberemos instalar en cada plataforma

lamp_pkgs = value_for_platform({
  ["ubuntu"]  => {"default" => ["apache2", "mysql-server", "php"]}, 
  ["centos"]  => {"default"=> ["httpd", "mariadb-server", "php"]},
  "default"=> ["apache2", "mysql-server", "php"]})

lamp_pkgs.each do |lamp_pkg|
    package lamp_pkg do
      action :install
    end
end


vim_base_pkgs = value_for_platform({
    ["ubuntu","debian","arch"]  => {"default" => ["vim"]}, 
    ["redhat","centos","fedora","scientific"] => {"default"=> ["vim-minimal","vim-enhanced"]},
    "default"=> ["vim"]})

vim_base_pkgs.each do |vim_base_pkg| 
    #Chef::Log.warn" platform_family = #{node['platform_family']}"
    #Chef::Log.warn" vim_base_pkg = #{vim_base_pkg}"
    package vim_base_pkg
end

node['vim']['extra_packages'].each do |vimpkg| 
    package vimpkg
end